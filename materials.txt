create database materialHousedb;
create table users(
	id serial primary key,
	username varchar(100) unique not null,
	password text not null,
	role varchar(20) not null check (role IN ('admin', 'storekeeper', 'accountant')),
	name varchar(100),
	secondname varchar(100),
	created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	email VARCHAR(100),
	phone VARCHAR(20),
	birthday DATE,
	updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)

create table notifications (
	id serial primary key,
	user_id int references users(id) on delete set null,
	type varchar(100) not null,
	title varchar(255) not null,
	message text not null,
	read boolean default false,
	created_at timestamp default current_timestamp
);


create table materialCategories (
	id serial primary key,
	name varchar(255) not null,
	description text,
	created_by int references users(id) on delete set null,
	updated_by int references users(id) on delete set null,
	created_at timestamp default current_timestamp,
	updated_at timestamp default current_timestamp
 );
create table materials (
	id serial primary key,
	category_id int references materialCategories(id) on delete set null,
	name varchar(255) not null,
	code varchar(50) unique not null,
	description text,
	unit varchar(30) not null,
	quantity int default 0 check (quantity >=0),
	created_by INTEGER REFERENCES users(id) ON DELETE SET NULL,
    updated_by INTEGER REFERENCES users(id) ON DELETE SET NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
 );
